import Test'Assert

import 'Number
import 'String'Utf8

Characters = \() none | error {
  Assert'Equal(Utf8'Characters("ğŸ—¿ğŸ˜„ğŸ¶"), [string "ğŸ—¿", "ğŸ˜„", "ğŸ¶"])
}

Contains = \() none | error {
  Assert'True(Utf8'Contains("tomato", "mat"))
}

ContainsFail = \() none | error {
  Assert'True(!Utf8'Contains("tomato", "foo"))
}

Find = \() none | error {
  Assert'Equal(Utf8'Find("ğŸ—¿ğŸ˜„ğŸ¶", "ğŸ˜„"), 2)
}

FindFail = \() none | error {
  Assert'Equal(Utf8'Find("ğŸ—¿ğŸ˜„ğŸ¶", "ğŸ±"), none)
}

StartsWith = \() none | error {
  Assert'True(Utf8'StartsWith("ğŸ—¿ğŸ˜„ğŸ¶", "ğŸ—¿ğŸ˜„"))
}

EndsWith = \() none | error {
  Assert'True(Utf8'EndsWith("ğŸ—¿ğŸ˜„ğŸ¶", "ğŸ˜„ğŸ¶"))
}

LengthEmpty = \() none | error {
  Assert'Equal(Utf8'Length(""), 0)
}

LengthEmoji = \() none | error {
  Assert'Equal(Utf8'Length("ğŸ˜„"), 1)
}

LengthTwoEmojis = \() none | error {
  Assert'Equal(Utf8'Length("ğŸ˜„ğŸ—¿"), 2)
}

Replace = \() none | error {
  Assert'Equal(Utf8'Replace("ğŸ—¿ğŸ˜„ğŸ¶", "ğŸ˜„", "smile"), "ğŸ—¿smileğŸ¶")
}

SliceStart = \() none | error {
  Assert'Equal(Utf8'Slice("ğŸ—¿ğŸ˜„ğŸ¶", 1, 2), "ğŸ—¿ğŸ˜„")
}

SliceMiddle = \() none | error {
  Assert'Equal(Utf8'Slice("ğŸ—¿ğŸ˜„ğŸ¶", 2, 2), "ğŸ˜„")
}

SliceEnd = \() none | error {
  Assert'Equal(Utf8'Slice("ğŸ—¿ğŸ˜„ğŸ¶", 2, 3), "ğŸ˜„ğŸ¶")
}

SliceInfinity = \() none | error {
  Assert'Equal(Utf8'Slice("ğŸ—¿ğŸ˜„ğŸ¶", 2, Number'Infinity()), "ğŸ˜„ğŸ¶")
}

Split = \() none | error {
  Assert'Equal(Utf8'Split("ğŸ—¿ ğŸ˜„ ğŸ¶", " "), [string "ğŸ—¿", "ğŸ˜„", "ğŸ¶"])
}

ToLowercase = \() none | error {
  Assert'Equal(Utf8'ToLowercase("FOO"), "foo")
}

ToUppercase = \() none | error {
  Assert'Equal(Utf8'ToUppercase("foo"), "FOO")
}

Trim = \() none | error {
  Assert'Equal(Utf8'Trim(" foo "), "foo")
}

TrimEnd = \() none | error {
  Assert'Equal(Utf8'TrimEnd(" foo "), " foo")
}

TrimEndMatches = \() none | error {
  # spell-checker: disable-next-line
  Assert'Equal(Utf8'TrimEndMatches("bazbarfoo", "o"), "bazbarf")
}

TrimMatches = \() none | error {
  # spell-checker: disable-next-line
  Assert'Equal(Utf8'TrimMatches("foobarfoo", "foo"), "bar")
}

TrimStart = \() none | error {
  Assert'Equal(Utf8'TrimStart(" foo "), "foo ")
}

TrimStartMatches = \() none | error {
  # spell-checker: disable-next-line
  Assert'Equal(Utf8'TrimStartMatches("foobarbaz", "fo"), "obarbaz")
}
