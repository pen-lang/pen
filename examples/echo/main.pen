import Console'Print
import Core'String
import Os'Context { Context }
import Os'Environment

main = \(ctx Context) none {
  if x = run(ctx) as none {
    none
  } else {
    Print'Line(ctx, if x = source(x) as string { x } else { "unknown error" })
    Process'Exit(1)
  }
}

run = \(ctx Context) none | error {
  Print'Line(ctx, String'Join(Environment'Arguments(ctx), " "))?

  none
}
