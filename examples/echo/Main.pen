import Core'String
import System'Context { Context }
import System'Environment

import 'console

main = \(ctx Context) number {
  if x = run(ctx) as none {
    0
  } else {
    console'Print(ctx, if x = source(x) as string {
      x
    } else {
      "unknown error"
    })

    1
  }
}

run = \(ctx Context) none | error {
  console'Print(ctx, String'Join(Environment'Arguments(ctx), " "))?

  none
}
