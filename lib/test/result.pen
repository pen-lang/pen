# TODO Remove this boxing when the C calling convention is fully supported in FFI.
type boxResult {
	error none | error
}

type ffiResult {
  isError boolean
  message string
}

foreign "c" _pen_test_convert_result = \(r boxResult) ffiResult {
	if e = r.error as none {
		ffiResult{isError: false, message: ""}
  } else {
		ffiResult{
			isError: true,
			message: if s = source(e) as string { s } else { "unknown test error" }
		}
	}
}
